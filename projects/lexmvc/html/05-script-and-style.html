<html><head><meta charset="UTF-8"><link rel="stylesheet" href="../css/skeleton.css"/><link rel="stylesheet" href="../css/site.css"/><link href="https://fonts.googleapis.com/css?family=IBM+Plex+Mono&display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Raleway:300,400&display=swap" rel="stylesheet"></head><body><h1 id="script-style">Script &amp; Style</h1>
<div class="container">
<h2 id="style">Style</h2>
<p>The style of the project follows that of the documentation with black on white with reversed highlights for easier reading.</p>
<div class="sourceCode" id="style"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="style-1" title="1">html { <span class="kw">background</span>: <span class="cn">#ffffff</span><span class="op">;</span> }</a>
<a class="sourceLine" id="style-2" title="2">body { <span class="kw">color</span>: <span class="cn">#000000</span><span class="op">;</span> <span class="kw">margin</span>: <span class="dv">0</span><span class="dt">px</span><span class="op">;</span> }</a>
<a class="sourceLine" id="style-3" title="3"></a>
<a class="sourceLine" id="style-4" title="4">h1<span class="op">,</span> h2 { <span class="kw">text-align</span>: <span class="dv">center</span><span class="op">;</span> }</a></code></pre></div>
<p>Links are represented as boxes with a slight red tint on hover. Since pandoc’s code output highlights lines as the <code>&lt;a&gt;</code> tag with the class attribute <code>sourceLine</code> the predicate <code>not(.sourceLine)</code> is used to exclude those lines from formatting.</p>
<div class="sourceCode" id="style"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="style-1" title="1">a<span class="in">:hover:not(</span><span class="fu">.sourceLine</span><span class="in">)</span> {</a>
<a class="sourceLine" id="style-2" title="2">    <span class="kw">border-color</span>: <span class="cn">#ff4630</span><span class="op">;</span></a>
<a class="sourceLine" id="style-3" title="3">    <span class="kw">color</span>: <span class="cn">#ff4630</span><span class="op">;</span></a>
<a class="sourceLine" id="style-4" title="4">    <span class="kw">padding</span>: <span class="dv">2</span><span class="dt">px</span> <span class="dv">8</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="style-5" title="5">    <span class="kw">text-decoration</span>: <span class="dv">none</span><span class="op">;</span></a>
<a class="sourceLine" id="style-6" title="6">}</a>
<a class="sourceLine" id="style-7" title="7"></a>
<a class="sourceLine" id="style-8" title="8">a<span class="in">:not(</span><span class="fu">.sourceLine</span><span class="in">)</span> {</a>
<a class="sourceLine" id="style-9" title="9">    <span class="kw">border-style</span>: <span class="dv">solid</span><span class="op">;</span></a>
<a class="sourceLine" id="style-10" title="10">    <span class="kw">border-width</span>: <span class="dv">1</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="style-11" title="11">    <span class="kw">color</span>: <span class="cn">#000000</span><span class="op">;</span></a>
<a class="sourceLine" id="style-12" title="12">    <span class="kw">background</span>: <span class="cn">#ffffff</span><span class="op">;</span></a>
<a class="sourceLine" id="style-13" title="13">    <span class="kw">padding</span>: <span class="dv">2</span><span class="dt">px</span> <span class="dv">8</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="style-14" title="14">    <span class="kw">text-decoration</span>: <span class="dv">none</span><span class="op">;</span></a>
<a class="sourceLine" id="style-15" title="15">}</a>
<a class="sourceLine" id="style-16" title="16"></a>
<a class="sourceLine" id="style-17" title="17">a<span class="fu">.sourceLine</span> {</a>
<a class="sourceLine" id="style-18" title="18">    <span class="kw">width</span>: <span class="dv">100</span><span class="dt">%</span><span class="op">;</span></a>
<a class="sourceLine" id="style-19" title="19">    <span class="kw">display</span>: <span class="dv">inline-block</span><span class="op">;</span></a>
<a class="sourceLine" id="style-20" title="20">}</a></code></pre></div>
<div class="sourceCode" id="style"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="style-1" title="1">ul {</a>
<a class="sourceLine" id="style-2" title="2">    <span class="kw">list-style</span>: <span class="dv">square</span> <span class="dv">inside</span><span class="op">;</span></a>
<a class="sourceLine" id="style-3" title="3">}</a></code></pre></div>
<p>The default checkboxes are replaced by boxes drawn in pure CSS by making use of the <code>:checked</code> selector to retain the original behaviour.</p>
<div class="sourceCode" id="style"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="style-1" title="1">input<span class="ex">[type</span><span class="op">=</span><span class="st">&quot;checkbox&quot;</span><span class="ex">]</span> {</a>
<a class="sourceLine" id="style-2" title="2">    <span class="kw">-webkit-appearance</span>: <span class="dv">none</span><span class="op">;</span></a>
<a class="sourceLine" id="style-3" title="3">    <span class="kw">display</span>: <span class="dv">inline-block</span><span class="op">;</span></a>
<a class="sourceLine" id="style-4" title="4">    <span class="kw">padding</span>: <span class="dv">12</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="style-5" title="5">    <span class="kw">margin-bottom</span>: <span class="dv">-7</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="style-6" title="6">    <span class="kw">border-style</span>: <span class="dv">solid</span><span class="op">;</span></a>
<a class="sourceLine" id="style-7" title="7">    <span class="kw">border-width</span>: <span class="dv">1</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="style-8" title="8">    <span class="kw">border-color</span>: <span class="cn">#000000</span><span class="op">;</span></a>
<a class="sourceLine" id="style-9" title="9">    <span class="kw">background</span>: <span class="cn">#ffffff</span><span class="op">;</span></a>
<a class="sourceLine" id="style-10" title="10">    <span class="kw">position</span>: <span class="dv">relative</span><span class="op">;</span></a>
<a class="sourceLine" id="style-11" title="11">}</a>
<a class="sourceLine" id="style-12" title="12"></a>
<a class="sourceLine" id="style-13" title="13">input<span class="ex">[type</span><span class="op">=</span><span class="st">&quot;checkbox&quot;</span><span class="ex">]</span><span class="in">:checked</span> {</a>
<a class="sourceLine" id="style-14" title="14">    <span class="kw">-webkit-appearance</span>: <span class="dv">none</span><span class="op">;</span></a>
<a class="sourceLine" id="style-15" title="15">    <span class="kw">padding</span>: <span class="dv">12</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="style-16" title="16">    <span class="kw">border-color</span>: <span class="cn">#ffffff</span><span class="op">;</span></a>
<a class="sourceLine" id="style-17" title="17">    <span class="kw">background</span>: <span class="cn">#000000</span><span class="op">;</span></a>
<a class="sourceLine" id="style-18" title="18">}</a></code></pre></div>
<p>Source code itself uses slight variation on the black default to better highlight syntactic elements. Upon hover the style is reversed.</p>
<div class="sourceCode" id="style"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="style-1" title="1"><span class="fu">.fu</span> { <span class="kw">color</span>: <span class="cn">#111111</span><span class="op">;</span> }</a>
<a class="sourceLine" id="style-2" title="2"><span class="fu">.kw</span> { <span class="kw">color</span>: <span class="cn">#000000</span><span class="op">;</span> <span class="kw">font-weight</span>: <span class="dv">bold</span><span class="op">;</span> }</a>
<a class="sourceLine" id="style-3" title="3"><span class="fu">.dt</span> { <span class="kw">color</span>: <span class="cn">#222222</span><span class="op">;</span> <span class="kw">font-weight</span>: <span class="dv">bold</span><span class="op">;</span> }</a>
<a class="sourceLine" id="style-4" title="4"><span class="fu">.bu</span> { <span class="kw">color</span>: <span class="cn">#000000</span><span class="op">;</span> <span class="kw">font-weight</span>: <span class="dv">bold</span><span class="op">;</span> }</a>
<a class="sourceLine" id="style-5" title="5"><span class="fu">.op</span> { <span class="kw">color</span>: <span class="cn">#000000</span><span class="op">;</span> <span class="kw">font-weight</span>: <span class="dv">bold</span><span class="op">;</span> }</a>
<a class="sourceLine" id="style-6" title="6"><span class="fu">.cf</span> { <span class="kw">color</span>: <span class="cn">#000000</span><span class="op">;</span> <span class="kw">font-weight</span>: <span class="dv">bold</span><span class="op">;</span> }</a>
<a class="sourceLine" id="style-7" title="7"></a>
<a class="sourceLine" id="style-8" title="8"><span class="fu">.sourceLine</span> { <span class="kw">color</span>: <span class="cn">#000000</span><span class="op">;</span> }</a>
<a class="sourceLine" id="style-9" title="9"><span class="fu">.sourceLine</span><span class="in">:hover</span> { <span class="kw">color</span>: <span class="cn">#ffffff</span><span class="op">;</span> <span class="kw">background</span>: <span class="cn">#000000</span><span class="op">;</span> }</a>
<a class="sourceLine" id="style-10" title="10"><span class="fu">.sourceLine</span><span class="in">:hover</span> <span class="op">&gt;</span> <span class="fu">.kw</span> { <span class="kw">color</span>: <span class="cn">#ffffff</span><span class="op">;</span> }</a>
<a class="sourceLine" id="style-11" title="11"><span class="fu">.sourceLine</span><span class="in">:hover</span> <span class="op">&gt;</span> <span class="fu">.dt</span> { <span class="kw">color</span>: <span class="cn">#dddddd</span><span class="op">;</span> }</a>
<a class="sourceLine" id="style-12" title="12"><span class="fu">.sourceLine</span><span class="in">:hover</span> <span class="op">&gt;</span> <span class="fu">.fu</span> { <span class="kw">color</span>: <span class="cn">#eeeeee</span><span class="op">;</span> }</a>
<a class="sourceLine" id="style-13" title="13"><span class="fu">.sourceLine</span><span class="in">:hover</span> <span class="op">&gt;</span> <span class="fu">.bu</span> { <span class="kw">color</span>: <span class="cn">#ffffff</span><span class="op">;</span> }</a>
<a class="sourceLine" id="style-14" title="14"><span class="fu">.sourceLine</span><span class="in">:hover</span> <span class="op">&gt;</span> <span class="fu">.op</span> { <span class="kw">color</span>: <span class="cn">#ffffff</span><span class="op">;</span> }</a>
<a class="sourceLine" id="style-15" title="15"><span class="fu">.sourceLine</span><span class="in">:hover</span> <span class="op">&gt;</span> <span class="fu">.cf</span> { <span class="kw">color</span>: <span class="cn">#ffffff</span><span class="op">;</span> }</a></code></pre></div>
<p>Inline code</p>
<div class="sourceCode" id="style"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="style-1" title="1">code {</a>
<a class="sourceLine" id="style-2" title="2">    <span class="kw">font-family</span>: <span class="st">&#39;IBM Plex Mono&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="style-3" title="3">    <span class="kw">background</span>: <span class="cn">#000000</span><span class="op">;</span></a>
<a class="sourceLine" id="style-4" title="4">    <span class="kw">color</span>: <span class="cn">#ffffff</span><span class="op">;</span></a>
<a class="sourceLine" id="style-5" title="5">    <span class="kw">padding</span>: <span class="dv">1</span><span class="dt">px</span> <span class="dv">4</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="style-6" title="6">    <span class="kw">border-radius</span>: <span class="dv">0</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="style-7" title="7">    <span class="kw">border-color</span>: <span class="cn">#000000</span><span class="op">;</span></a>
<a class="sourceLine" id="style-8" title="8">}</a></code></pre></div>
<p>Code blocks</p>
<div class="sourceCode" id="style"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="style-1" title="1">pre <span class="op">&gt;</span> code {</a>
<a class="sourceLine" id="style-2" title="2">    <span class="kw">background</span>: <span class="cn">#ffffff</span><span class="op">;</span></a>
<a class="sourceLine" id="style-3" title="3">    <span class="kw">color</span>: <span class="cn">#000000</span><span class="op">;</span></a>
<a class="sourceLine" id="style-4" title="4">    <span class="kw">border-width</span>: <span class="dv">0</span><span class="dt">px</span> <span class="dv">0</span><span class="dt">px</span> <span class="dv">0</span><span class="dt">px</span> <span class="dv">0</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="style-5" title="5">    <span class="kw">overflow</span>: <span class="bu">auto</span><span class="op">;</span></a>
<a class="sourceLine" id="style-6" title="6">}</a></code></pre></div>
<div class="sourceCode" id="style"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="style-1" title="1">h1 {</a>
<a class="sourceLine" id="style-2" title="2">    <span class="kw">font-family</span>: <span class="st">&#39;Raleway&#39;</span><span class="op">,</span> <span class="dv">sans-serif</span><span class="op">;</span></a>
<a class="sourceLine" id="style-3" title="3">    <span class="kw">font-weight</span>: <span class="dv">300</span><span class="op">;</span></a>
<a class="sourceLine" id="style-4" title="4">    <span class="kw">font-size</span>: <span class="dv">5</span><span class="dt">em</span><span class="op">;</span></a>
<a class="sourceLine" id="style-5" title="5">    <span class="kw">padding-top</span>: <span class="dv">150</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="style-6" title="6">    <span class="kw">padding-bottom</span>: <span class="dv">50</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="style-7" title="7">    <span class="kw">margin-bottom</span>: <span class="dv">100</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="style-8" title="8">    <span class="kw">width</span>: <span class="dv">100</span><span class="dt">%</span><span class="op">;</span></a>
<a class="sourceLine" id="style-9" title="9">    <span class="kw">height</span>: <span class="dv">200</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="style-10" title="10">    <span class="kw">color</span>: <span class="cn">#ffffff</span><span class="op">;</span></a>
<a class="sourceLine" id="style-11" title="11">    <span class="kw">background</span>: <span class="cn">#000000</span><span class="op">;</span></a>
<a class="sourceLine" id="style-12" title="12">}</a></code></pre></div>
<div class="sourceCode" id="style"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="style-1" title="1">h2 {</a>
<a class="sourceLine" id="style-2" title="2">    <span class="kw">padding-top</span>: <span class="dv">50</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="style-3" title="3">    <span class="kw">padding-bottom</span>: <span class="dv">0</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="style-4" title="4">    <span class="kw">margin-top</span>: <span class="dv">150</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="style-5" title="5">    <span class="kw">margin-bottom</span>: <span class="dv">50</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="style-6" title="6">}</a>
<a class="sourceLine" id="style-7" title="7"></a>
<a class="sourceLine" id="style-8" title="8">h3 {</a>
<a class="sourceLine" id="style-9" title="9">    <span class="kw">background</span>: <span class="cn">#000000</span><span class="op">;</span></a>
<a class="sourceLine" id="style-10" title="10">    <span class="kw">color</span>: <span class="cn">#ffffff</span><span class="op">;</span></a>
<a class="sourceLine" id="style-11" title="11">    <span class="kw">padding</span>: <span class="dv">2</span><span class="dt">px</span> <span class="dv">8</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="style-12" title="12">    <span class="kw">font-size</span>: <span class="dv">2.4</span><span class="dt">rem</span><span class="op">;</span></a>
<a class="sourceLine" id="style-13" title="13">}</a>
<a class="sourceLine" id="style-14" title="14"></a>
<a class="sourceLine" id="style-15" title="15">h4 { <span class="kw">font-size</span>: <span class="dv">1.8</span><span class="dt">rem</span><span class="op">;</span> <span class="kw">line-height</span>: <span class="dv">1.35</span><span class="op">;</span> <span class="kw">letter-spacing</span>: <span class="dv">-.08</span><span class="dt">rem</span><span class="op">;</span> }</a>
<a class="sourceLine" id="style-16" title="16">h5 { <span class="kw">font-size</span>: <span class="dv">1.5</span><span class="dt">rem</span><span class="op">;</span> <span class="kw">line-height</span>: <span class="dv">1.5</span><span class="op">;</span>  <span class="kw">letter-spacing</span>: <span class="dv">-.05</span><span class="dt">rem</span><span class="op">;</span> }</a>
<a class="sourceLine" id="style-17" title="17">h6 { <span class="kw">font-size</span>: <span class="dv">1.2</span><span class="dt">rem</span><span class="op">;</span> <span class="kw">line-height</span>: <span class="dv">1.6</span><span class="op">;</span>  <span class="kw">letter-spacing</span>: <span class="dv">0</span><span class="op">;</span> }</a></code></pre></div>
<div class="sourceCode" id="style"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="style-1" title="1">img {</a>
<a class="sourceLine" id="style-2" title="2">    <span class="kw">display</span>: <span class="dv">block</span><span class="op">;</span></a>
<a class="sourceLine" id="style-3" title="3">    <span class="kw">margin-left</span>: <span class="bu">auto</span><span class="op">;</span></a>
<a class="sourceLine" id="style-4" title="4">    <span class="kw">margin-right</span>: <span class="bu">auto</span><span class="op">;</span></a>
<a class="sourceLine" id="style-5" title="5">}</a></code></pre></div>
<div class="sourceCode" id="style"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="style-1" title="1"><span class="in">::-webkit-scrollbar</span> {</a>
<a class="sourceLine" id="style-2" title="2">    <span class="kw">width</span>: <span class="dv">7</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="style-3" title="3">    <span class="kw">height</span>: <span class="dv">7</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="style-4" title="4">}</a>
<a class="sourceLine" id="style-5" title="5"></a>
<a class="sourceLine" id="style-6" title="6"><span class="in">::-webkit-scrollbar-track</span> {</a>
<a class="sourceLine" id="style-7" title="7">    <span class="kw">background</span>: <span class="cn">#000000</span><span class="op">;</span></a>
<a class="sourceLine" id="style-8" title="8">}</a>
<a class="sourceLine" id="style-9" title="9"></a>
<a class="sourceLine" id="style-10" title="10"><span class="in">::-webkit-scrollbar-thumb</span> {</a>
<a class="sourceLine" id="style-11" title="11">    <span class="kw">background</span>: <span class="cn">#ffffff</span><span class="op">;</span></a>
<a class="sourceLine" id="style-12" title="12">}</a></code></pre></div>
<div class="sourceCode" id="cb1" data-file="src/BackEnd/wwwroot/css/site.css"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="cb1-1" title="1">&lt;&lt;style<span class="op">&gt;&gt;</span></a></code></pre></div>
<div class="sourceCode" id="cb2" data-file="css/site.css"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="cb2-1" title="1">&lt;&lt;style<span class="op">&gt;&gt;</span></a></code></pre></div>
<h2 id="global-site-script">Global site script</h2>
<div class="sourceCode" id="cb3" data-file="src/BackEnd/wwwroot/js/site.js"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="op">&lt;&lt;</span>validation<span class="op">&gt;&gt;</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="op">&lt;&lt;</span>regex<span class="op">&gt;&gt;</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="op">&lt;&lt;</span>ajax<span class="op">&gt;&gt;</span></a></code></pre></div>
<h3 id="client-side-validation">Client-side Validation</h3>
<p>Fields need to be validated client-side signal errors as early as possible for the user. Client-side valiation is only convenience of interface and never the final step in validation of user input. The <code>validator</code> function constructs a continuation to be invoked while the user interacts with the input field.</p>
<div class="sourceCode" id="validation"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="validation-1" title="1"><span class="kw">const</span> validator <span class="op">=</span> vf <span class="kw">=&gt;</span> el <span class="kw">=&gt;</span> errt <span class="kw">=&gt;</span> textel <span class="kw">=&gt;</span> () <span class="op">{</span></a>
<a class="sourceLine" id="validation-2" title="2">    <span class="cf">if</span> (<span class="at">vf</span>(<span class="va">textel</span>.<span class="at">text</span>)) <span class="op">{</span></a>
<a class="sourceLine" id="validation-3" title="3">        <span class="va">el</span>.<span class="at">innerHTML</span> <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="validation-4" title="4">    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="validation-5" title="5">        <span class="va">el</span>.<span class="at">innerHTML</span> <span class="op">=</span> errt<span class="op">;</span></a>
<a class="sourceLine" id="validation-6" title="6">    <span class="op">}</span></a>
<a class="sourceLine" id="validation-7" title="7"><span class="op">}</span></a></code></pre></div>
<p>For each there’s a resulting predicate.</p>
<div class="sourceCode" id="validation"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="validation-1" title="1"><span class="kw">const</span> v_phonenumber <span class="op">=</span> text <span class="kw">=&gt;</span> <span class="va">r_phone</span>.<span class="at">test</span>(text)</a>
<a class="sourceLine" id="validation-2" title="2"><span class="kw">const</span> v_email <span class="op">=</span> text <span class="kw">=&gt;</span> <span class="va">r_email</span>.<span class="at">test</span>(text)</a></code></pre></div>
<p>The regex itself is near incomprehensible and lifted from various standards rather than written by hand.</p>
<div class="sourceCode" id="regex"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="regex-1" title="1"><span class="co">// https://stackoverflow.com/questions/123559/a-comprehensive-regex-for-phone-number-validation</span></a>
<a class="sourceLine" id="regex-2" title="2"><span class="kw">const</span> r_phone <span class="op">=</span> <span class="ss">/</span><span class="sc">^(?</span><span class="ss">:</span><span class="sc">(?</span><span class="ss">:</span><span class="sc">\(?(?</span><span class="ss">:00</span><span class="sc">|\+)([1-4]\d\d|[1-9]\d?)\)?)?[\-\.\ \\\/]?)?((?</span><span class="ss">:</span><span class="sc">\(?\d{1,}\)?[\-\.\ \\\/]?){0,})(?</span><span class="ss">:</span><span class="sc">[\-\.\ \\\/]?(?</span><span class="ss">:#</span><span class="sc">|</span><span class="ss">ext</span><span class="sc">\.?|</span><span class="ss">extension</span><span class="sc">|</span><span class="ss">x</span><span class="sc">)[\-\.\ \\\/]?(\d+))?$</span><span class="ss">/i</span></a>
<a class="sourceLine" id="regex-3" title="3"></a>
<a class="sourceLine" id="regex-4" title="4"><span class="co">// https://stackoverflow.com/questions/201323/how-to-validate-an-email-address-using-a-regular-expression</span></a>
<a class="sourceLine" id="regex-5" title="5"><span class="kw">const</span> r_email <span class="op">=</span> <span class="ss">/</span><span class="sc">^(?</span><span class="ss">:</span><span class="sc">[a-z0-9!#$%&amp;&#39;*+/=?^_`{|}~-]+(?</span><span class="ss">:</span><span class="sc">\.[a-z0-9!#$%&amp;&#39;*+/=?^_`{|}~-]+)*|</span><span class="ss">&quot;</span><span class="sc">(?</span><span class="ss">:</span><span class="sc">[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*</span><span class="ss">&quot;</span><span class="sc">)</span><span class="ss">@</span><span class="sc">(?</span><span class="ss">:</span><span class="sc">(?</span><span class="ss">:</span><span class="sc">[a-z0-9](?</span><span class="ss">:</span><span class="sc">[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?</span><span class="ss">:</span><span class="sc">[a-z0-9-]*[a-z0-9])?|\[(?</span><span class="ss">:</span><span class="sc">(?</span><span class="ss">:</span><span class="sc">(</span><span class="ss">2</span><span class="sc">(</span><span class="ss">5</span><span class="sc">[0-5]|[0-4][0-9])|</span><span class="ss">1</span><span class="sc">[0-9][0-9]|[1-9]?[0-9]))\.){3}(?</span><span class="ss">:</span><span class="sc">(</span><span class="ss">2</span><span class="sc">(</span><span class="ss">5</span><span class="sc">[0-5]|[0-4][0-9])|</span><span class="ss">1</span><span class="sc">[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]</span><span class="ss">:</span><span class="sc">(?</span><span class="ss">:</span><span class="sc">[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$</span><span class="ss">/</span></a></code></pre></div>
<h3 id="ajax">AJAX</h3>
<p>Regenerating the pages constantly ends in quite a bit of overhead for the server as most of the time the client only wants incremental updates when dealing with forms and similar pages. Thus on-demand updates through <code>AJAX</code> improves the situation by requesting smaller fragments from the server at a time on interactive pages.</p>
<p>Thus it begins with defining a module for <code>AJAX</code> communication.</p>
<div class="sourceCode" id="ajax"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="ajax-1" title="1"><span class="kw">const</span> ajax <span class="op">=</span> (<span class="op">{</span></a></code></pre></div>
<p>On each invocation a new <code>XmlHttpRequest</code> request is constructed. This is our primary means of communication with the server.</p>
<div class="sourceCode" id="ajax"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="ajax-1" title="1">    <span class="kw">new</span><span class="op">:</span> () <span class="kw">=&gt;</span> <span class="op">{</span> <span class="cf">return</span> <span class="kw">new</span> <span class="at">XmlHttpRequest</span>() <span class="op">},</span></a></code></pre></div>
<div class="sourceCode" id="ajax"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="ajax-1" title="1">    get<span class="op">:</span> (url<span class="op">,</span> data<span class="op">,</span> callback) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="ajax-2" title="2">        <span class="kw">const</span> query <span class="op">=</span> <span class="va">Object</span>.<span class="at">keys</span>(data).<span class="at">map</span>(key <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="ajax-3" title="3">            <span class="at">encodeURIComponent</span>(key) <span class="op">+</span> <span class="st">&#39;=&#39;</span> <span class="op">+</span> <span class="at">encodeURIComponent</span>(data[key]))</a>
<a class="sourceLine" id="ajax-4" title="4">        <span class="kw">const</span> qstring <span class="op">=</span> url <span class="op">+</span> (<span class="va">query</span>.<span class="at">length</span> <span class="op">?</span> <span class="st">&#39;?&#39;</span> <span class="op">+</span> <span class="va">query</span>.<span class="at">join</span>(<span class="st">&#39;&amp;&#39;</span>) : <span class="st">&#39;&#39;</span>)</a>
<a class="sourceLine" id="ajax-5" title="5">        <span class="va">ajax</span>.<span class="at">send</span>(qstring<span class="op">,</span> callback<span class="op">,</span> <span class="st">&#39;GET&#39;</span><span class="op">,</span> <span class="kw">null</span>)</a>
<a class="sourceLine" id="ajax-6" title="6">    <span class="op">},</span></a></code></pre></div>
<div class="sourceCode" id="ajax"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="ajax-1" title="1">    post<span class="op">:</span> (url<span class="op">,</span> data<span class="op">,</span> callback) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="ajax-2" title="2">        <span class="kw">const</span> query <span class="op">=</span> <span class="va">Object</span>.<span class="at">keys</span>(data).<span class="at">map</span>(key <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="ajax-3" title="3">            <span class="at">encodeURIComponent</span>(key) <span class="op">+</span> <span class="st">&#39;=&#39;</span> <span class="op">+</span> <span class="at">encodeURIComponent</span>(data[key]))</a>
<a class="sourceLine" id="ajax-4" title="4">        <span class="va">ajax</span>.<span class="at">send</span>(url<span class="op">,</span> callback<span class="op">,</span> <span class="st">&#39;POST&#39;</span><span class="op">,</span> <span class="va">query</span>.<span class="at">join</span>(<span class="st">&#39;&amp;&#39;</span>))</a>
<a class="sourceLine" id="ajax-5" title="5">    <span class="op">},</span></a></code></pre></div>
<div class="sourceCode" id="ajax"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="ajax-1" title="1">    send<span class="op">:</span> (url<span class="op">,</span> callback<span class="op">,</span> method<span class="op">,</span> data) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="ajax-2" title="2">        <span class="kw">const</span> x <span class="op">=</span> <span class="va">ajax</span>.<span class="at">new</span>()</a>
<a class="sourceLine" id="ajax-3" title="3">        <span class="va">x</span>.<span class="at">open</span>(methos<span class="op">,</span> url<span class="op">,</span> <span class="kw">true</span>)</a>
<a class="sourceLine" id="ajax-4" title="4">        <span class="va">x</span>.<span class="at">onreadystatechange</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="ajax-5" title="5">            <span class="cf">if</span> (<span class="va">x</span>.<span class="at">readyState</span> <span class="op">==</span> <span class="va">XMLHttpRequest</span>.<span class="at">DONE</span>) <span class="op">{</span></a>
<a class="sourceLine" id="ajax-6" title="6">                <span class="at">callback</span>(<span class="va">x</span>.<span class="at">responseText</span>)</a>
<a class="sourceLine" id="ajax-7" title="7">            <span class="op">}</span></a>
<a class="sourceLine" id="ajax-8" title="8">        <span class="op">}</span>)</a>
<a class="sourceLine" id="ajax-9" title="9">        <span class="cf">if</span> (method <span class="op">==</span> <span class="st">&quot;POST&quot;</span>) <span class="op">{</span></a>
<a class="sourceLine" id="ajax-10" title="10">            <span class="va">x</span>.<span class="at">setRequestHeader</span>(</a>
<a class="sourceLine" id="ajax-11" title="11">                <span class="st">&#39;Content-type&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="ajax-12" title="12">                <span class="st">&#39;application/x-www-form-urlencoded&#39;</span></a>
<a class="sourceLine" id="ajax-13" title="13">            )</a>
<a class="sourceLine" id="ajax-14" title="14">        <span class="op">}</span></a>
<a class="sourceLine" id="ajax-15" title="15">        <span class="va">x</span>.<span class="at">send</span>(data)</a>
<a class="sourceLine" id="ajax-16" title="16">    <span class="op">}</span></a>
<a class="sourceLine" id="ajax-17" title="17">})</a></code></pre></div>
</div>
<footer>Copyright (c) 2019 Simon A. Nielsen Knights</footer></body></html>